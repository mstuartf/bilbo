<mat-card-header class="home-card-header">

	<mat-card-title>Settings</mat-card-title>

    <a
      routerLink="/internal/home"
      [class.disabled]="showSpinner"
      mat-button color="primary">
      My Bills
    </a>

</mat-card-header>

<mat-card-content class="home-card-content">

	<div *ngIf="!allDataLoaded" class="mat-spinner-container">
     	<mat-spinner diameter="50"></mat-spinner>
    </div>

	<div *ngIf="allDataLoaded">

		<div class="d-flex items-center">

			<mat-form-field class="salary-date-form-field">

			  <mat-label>Salary date</mat-label>
			
			  <mat-select 
			    class="text-align-right"
			  	[disabled]="showSpinner" 
			  	[(ngModel)]="user.potDepositDay"
			  	(selectionChange)="updateSalaryDate()">

			    <mat-option *ngFor="let date of [].constructor(31); let i = index" [value]="i + 1">
			      {{i + 1}}
			    </mat-option>

			  </mat-select>
			
			</mat-form-field>

			<div>
	    		<mat-spinner diameter="30" *ngIf="showSalarySpinner"></mat-spinner>
	    	</div>

		</div>

		<div class="d-flex items-center">

			<mat-form-field class="salary-date-form-field">

			  <mat-label>Bilbo's Pot</mat-label>
			
			  <mat-select 
			  	[disabled]="showSpinner || !pots.length" 
			  	[(ngModel)]="user.bilboPotId"
			  	(selectionChange)="updateBilboPot()">

			    <mat-option *ngFor="let pot of pots" [value]="pot.id">
			      {{pot.name}}
			    </mat-option>

			  </mat-select>
			
			</mat-form-field>

			<div>
	    		<mat-spinner diameter="30" *ngIf="showBilboPotSpinner"></mat-spinner>
	    	</div>

		</div>

		<div class="d-flex items-center">

			<mat-form-field class="salary-date-form-field">

			  <mat-label>Main Account</mat-label>
			
			  <mat-select 
			  	[disabled]="showSpinner || !accounts.length"
			  	[(ngModel)]="user.mainAccountId"
			  	(selectionChange)="updateMainAccount()">

			    <mat-option *ngFor="let account of accounts" [value]="account.id">
			      {{account.type}}
			    </mat-option>

			  </mat-select>
			
			</mat-form-field>

			<div>
	    		<mat-spinner diameter="30" *ngIf="showMainAccountSpinner"></mat-spinner>
	    	</div>

		</div>

	</div>

</mat-card-content>

<mat-card-footer class="home-card-footer">

	<div class="d-flex items-center">

		<div class="small-mat-spinner-container">
    		<mat-spinner diameter="30" *ngIf="showNewSpinner"></mat-spinner>
    	</div>

	    <button
	      (click)="logout()"
	      [disabled]="showSpinner"
	      mat-raised-button color="primary">
	      Logout
	    </button>

	</div>

</mat-card-footer>
